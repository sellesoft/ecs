$ require "common"

#include "iro/Common.h"
#include "iro/Unicode.h"

@lpp.import "Color.lh"

@lpp.import "reflect/types/Array.lh"
@lpp.import "reflect/types/TypedStringMap.lh"
$ local m = require "reflect.Metadata"

struct Fruit 
{
  u8 size;
  u8 nutrients; 
};

struct Apple : Fruit
{
  struct Leaf 
  {
    u8 size;
  };

  reflect::Array<Leaf> leaves;
};

struct Banana : Fruit
{
  Color color;
  String name;
};

struct Orange : Fruit
{
  u8 moisture;
};

@m.def
struct Basket
{
  reflect::Array<reflect::TypedPtr<Fruit>> fruit;
};

