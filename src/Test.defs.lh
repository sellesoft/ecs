#include "iro/Common.h"
#include "iro/Unicode.h"

@@lpp.import "reflect/types/Array.lh"
$ local m = require "reflect.Metadata"

enum class ObjectKind
{
  Material,
  Immaterial,
};

struct Object
{
  ObjectKind kind;

  u64 id;
};

struct Fruit : Object
{
  u8 nutrients; 
};

@m.def
struct Apple : Fruit
{
  struct Leaf : Object
  {
    u8 size;
  };

  reflect::Array<Leaf> leaves;
};


