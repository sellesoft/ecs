$ require "common"
$ local metadata = require "reflect.Metadata"

@lpp.import "reflect/CompiledData.lh"

@lpp.import "game/shared/component/Component.lh"

@lpp.import "reflect/types/Array.lh"
@lpp.import "reflect/types/TypedStringMap.lh"

/* ============================================================================
 */
enum class PlacementMode
{
  Free,
  SnapToCenter,
};

/* ============================================================================
 */
@metadata.def
@metadata.source_data_type(entity)
struct EntityDef
{
  String name;
  ComponentDefArray components;

  PlacementMode placement;
};

@metadata.links(entity.data)
struct EntityDefLink : reflect::TypedCompiledDataLink<EntityDef> {};

typedef reflect::Array<EntityDefLink> EntityDefLinkArray;

